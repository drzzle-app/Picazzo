"use strict";!function(t){t.fn.drzProductFeature=function(e){var r=t(this),a=e||{};return r.each(function(){var e=t(this),r=e.find(".drzProduct-feature-imageContainer"),u=r.find(".drzProduct-feature-image"),i=e.find(".drzProduct-feature-thumb"),o=r.find(".drzProduct-feature-imageNext"),c=r.find(".drzProduct-feature-imageBack"),d=e.find(".drzProduct-feature-buyBtn"),n=e.find(".drzProduct-feature-optionsWrap select"),f=e.find(".drzProduct-feature-remove"),s=e.find(".drzProduct-feature-add"),m=e.find(".drzProduct-feature-count"),v=e.attr("data-image-zoom"),l={activeImage:null,quantity:1,step:1,max:!1,$options:n,clickThumb:function(e){e.preventDefault();var a=t(e.currentTarget),i=a.find(".drzProduct-feature-thumbImg"),o=i.attr("src");l.activeImage=o,u.attr("src",o),u.attr("alt",i.attr("alt")),r.css("background-image","url("+o+")"),r.attr("data-active-image",a.index()),a.parent().find(".drzProduct-feature-thumbImg").removeClass("drzProduct-feature-thumbActive"),a.find(".drzProduct-feature-thumbImg").addClass("drzProduct-feature-thumbActive")},moveNext:function(t){t.preventDefault();var e=parseInt(r.attr("data-active-image"),10);e<i.length-1&&i.eq(e+1).trigger("click")},moveBack:function(t){t.preventDefault();var e=parseInt(r.attr("data-active-image"),10);e>0&&i.eq(e-1).trigger("click")},zoomMove:function(e){var r=t(e.currentTarget);if("A"!==e.target.tagName){if("mousemove"===e.type){var a=e.offsetX/r.outerWidth()*100,u=e.offsetY/r.outerHeight()*100;r.css("background-position",a+"% "+u+"%")}}else r.css("background-position","")},updateQuantity:function(e){var r=t(e.currentTarget);r.hasClass("drzProduct-feature-add")&&(l.max&&l.quantity+l.step>l.max?l.quantity=l.max:l.quantity+=l.step);r.hasClass("drzProduct-feature-remove")&&l.quantity>1&&(l.quantity-=l.step,l.quantity<0&&(l.quantity=0)),m.text(l.quantity)},buyClick:function(t){t.preventDefault(),a.onCartAdd&&a.onCartAdd(l)}};l.activeImage=u.attr("src"),m.text(l.quantity),i.click(l.clickThumb),o.click(l.moveNext).hover(function(){u.css("opacity",1)},function(){u.css("opacity","")}),c.click(l.moveBack).hover(function(){u.css("opacity",1)},function(){u.css("opacity","")}),r.on("swipeleft",l.moveNext),r.on("swiperight",l.moveBack),s.click(l.updateQuantity),f.click(l.updateQuantity),"true"===v?r.mouseenter(function(){r.css("background-image","url("+l.activeImage+")")}).mouseleave(function(){r.css("background-image","")}).mousemove(l.zoomMove):r.addClass("drzProduct-feature-noHover"),d.click(l.buyClick),a.overrides&&a.overrides.quantity.step&&(l.step=a.overrides.quantity.step),a.overrides&&a.overrides.quantity.max&&(l.max=a.overrides.quantity.max),t.fn.drzProductFeature.destroy=function(t){t.find(".drzProduct-feature-thumbImg").removeClass("drzProduct-feature-thumbActive"),u.attr("alt",""),t.find(".drzProduct-feature-thumb").eq(0).find(".drzProduct-feature-thumbImg").addClass("drzProduct-feature-thumbActive"),r.removeClass("drzProduct-feature-noHover"),r.css("background-image",""),r.attr("data-active-image",0),r.off("swipeleft"),r.off("swiperight"),l.activeImage=null,l.quantity=1,l.step=1,l.max=!1,i.off("click"),o.off("click"),o.off("hover"),c.off("click"),c.off("hover"),s.off("click"),f.off("click"),d.off("click"),"true"===v&&(r.off("mouseenter"),r.off("mouseleave"),r.off("mousemove"))}}),this}}(jQuery);