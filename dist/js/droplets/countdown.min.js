"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.fn.drzCountDown=function(){var t=void 0;return e(this).each(function(){var n=e(this),r=n.find(".drzCountdown-endedMsg"),o=n.find(".drzCountdown-timerContainer"),i=void 0,a=void 0,u={tempDate:function(){var e=new Date((new Date).getTime()+864e5);return e},orderSets:function(e,t){return new Date(e.end).getTime()-new Date(t.end).getTime()},getBuffer:function(e){var t=!1;if(e.buffer){var n=e.buffer.split(" ")[1],r=e.buffer.split(" ")[0];r=parseInt(r,10),n.match(/second/gi)?t=1e3*r:n.match(/minute/gi)?t=60*r*1e3:n.match(/hour/gi)&&(t=3600*r*1e3),t=new Date(e.end).getTime()+t,t=new Date(t)}return t},getRemainingTime:function(e){var t=new Date,n=Date.parse(e)-Date.parse(t),r=Math.floor(n/1e3%60);r<0&&(r=0);var o=Math.floor(n/1e3/60%60);o<0&&(o=0);var i=Math.floor(n/36e5%24);i<0&&(i=0);var a=Math.floor(n/864e5);return a<0&&(a=0),{total:n,days:a,hours:i,minutes:o,seconds:r}},checkStart:function(e,t,i){var a=!1;return u.getRemainingTime(e.end).total<=0?(a=!0,u.countDownEnded(n,t,i)):(r.hide(),o.show()),a},updateTime:function(e,t,r,o){var a=e.find(".drzCountdown-days"),s=e.find(".drzCountdown-hours"),d=e.find(".drzCountdown-minutes"),c=e.find(".drzCountdown-seconds"),f=u.getRemainingTime(t.end);a.html(f.days),s.html(("0"+f.hours).slice(-2)),d.html(("0"+f.minutes).slice(-2)),c.html(("0"+f.seconds).slice(-2)),f.total<=0&&(clearInterval(i),u.countDownEnded(n,r,o))},sameTime:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()&&e.getSeconds()===t.getSeconds()},getNextOccurance:function(e){var t=new Date(e.end),n=t.getSeconds(),r=t.getMinutes(),o=t.getHours(),i=new Date,a=new Date,s=void 0;if(e.recurring.match(/week/gi)){var d=e.end.toString();(d=d.split(" ")[0]).match(/Sun/gi)?s=0:d.match(/Mon/gi)?s=1:d.match(/Tue/gi)?s=2:d.match(/Wed/gi)?s=3:d.match(/Thu/gi)?s=4:d.match(/Fri/gi)?s=5:d.match(/Sat/gi)&&(s=6);var c=s+(7-i.getDay());a.setDate(i.getDate()+c%7),a.setSeconds(n),a.setMinutes(r),a.setHours(o),(a<new Date||u.sameTime(a,new Date))&&a.setUTCDate(a.getUTCDate()+7)}return a},recurring:function(e){for(var t=[],i=0;i<=e.length-1;i++){var a=e[i];a.recurring&&(a.end=u.getNextOccurance(a),t.push(a))}t.length>0&&(r.hide(),o.show(),t=t.sort(u.orderSets),u.initCountDown(n,t[0],t,0))},countDownEnded:function(e,t,s){clearInterval(a),clearInterval(i);var d=t[s];o.hide(),r.show(),r.html('<h4 class="drz-h4 drzCountdown-endMessage">\n              '+(d.endMessage||"")+"\n            </h4>");var c=s+1,f=t[c],g=u.getBuffer(d);"undefined"!==(void 0===f?"undefined":_typeof(f))&&!1!==f?g?a=setInterval(function(){u.getRemainingTime(g).total<=0&&(r.hide(),o.show(),u.initCountDown(n,f,t,c),clearInterval(a))},500):(r.hide(),o.show(),u.initCountDown(n,f,t,c)):d.buffer?a=setInterval(function(){u.getRemainingTime(g).total<=0&&(r.hide(),o.show(),u.recurring(t),clearInterval(a))},100):u.recurring(t)},initCountDown:function(e,t,n,r){u.updateTime(e,t,n,r),i=setInterval(function(){u.updateTime(e,t,n,r)},1e3)}};function s(){var t=n.attr("data-countdown"),r=[{end:u.tempDate(),buffer:!1,endMessage:"Countdown Ended!",recurring:!1}];if("undefined"!==(void 0===t?"undefined":_typeof(t))&&!1!==t){var o=(t=JSON.parse(t)).sets.length;if(t.sets=t.sets.sort(u.orderSets),o>0)for(var i=0;i<=o-1;i++){var a=e.extend(!0,{},r[0],t.sets[i]);if(t.sets[i]=a,!u.checkStart(a,t.sets,i))return void u.initCountDown(n,a,t.sets,i)}else u.initCountDown(n,r[0],r,0)}else u.initCountDown(n,r[0],r,0)}t||(t=u),s(),e.fn.drzCountDown.reset=function(){clearInterval(i),clearInterval(a),s()}}),e.fn.drzCountDown.test=t||{},this}}(jQuery);