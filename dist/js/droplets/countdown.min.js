"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.fn.drzCountDown=function(){var t=void 0;return e(this).each(function(){var n=e(this),o=n.find(".drzCountdown-endedMsg"),r=n.find(".drzCountdown-timerContainer"),i=void 0,a=void 0,u=void 0,s={tempDate:function(){var e=new Date((new Date).getTime()+864e5);return e},orderSets:function(e,t){return new Date(e.end).getTime()-new Date(t.end).getTime()},getBuffer:function(e){var t=!1;if(e.buffer){var n=e.buffer.split(" ")[1],o=e.buffer.split(" ")[0];o=parseInt(o,10),n.match(/second/gi)?t=1e3*o:n.match(/minute/gi)?t=60*o*1e3:n.match(/hour/gi)&&(t=3600*o*1e3),t=new Date(e.end).getTime()+t,t=new Date(t)}return t},getRemainingTime:function(e){var t=new Date,n=Date.parse(e)-Date.parse(t),o=Math.floor(n/1e3%60);o<0&&(o=0);var r=Math.floor(n/1e3/60%60);r<0&&(r=0);var i=Math.floor(n/36e5%24);i<0&&(i=0);var a=Math.floor(n/864e5);return a<0&&(a=0),{total:n,days:a,hours:i,minutes:r,seconds:o}},checkStart:function(e,t,i){var a=!1;return s.getRemainingTime(e.end).total<=0?(a=!0,s.countDownEnded(n,t,i)):(o.hide(),r.show()),a},updateTime:function(e,t,o,r){var a=e.find(".drzCountdown-days"),u=e.find(".drzCountdown-hours"),d=e.find(".drzCountdown-minutes"),c=e.find(".drzCountdown-seconds"),f=s.getRemainingTime(t.end);a.html(f.days),u.html(("0"+f.hours).slice(-2)),d.html(("0"+f.minutes).slice(-2)),c.html(("0"+f.seconds).slice(-2)),f.total<=0&&(clearInterval(i),s.countDownEnded(n,o,r))},sameTime:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()&&e.getSeconds()===t.getSeconds()},getNextOccurance:function(e){var t=new Date(e.end),n=t.getSeconds(),o=t.getMinutes(),r=t.getHours(),i=new Date,a=new Date,u=void 0;if(e.recurring.match(/week/gi)){var d=e.end.toString();(d=d.split(" ")[0]).match(/Sun/gi)?u=0:d.match(/Mon/gi)?u=1:d.match(/Tue/gi)?u=2:d.match(/Wed/gi)?u=3:d.match(/Thu/gi)?u=4:d.match(/Fri/gi)?u=5:d.match(/Sat/gi)&&(u=6);var c=u+(7-i.getDay());a.setDate(i.getDate()+c%7),a.setSeconds(n),a.setMinutes(o),a.setHours(r),(a<new Date||s.sameTime(a,new Date))&&a.setUTCDate(a.getUTCDate()+7)}return a},recurring:function(e){for(var t=[],i=0;i<=e.length-1;i++){var a=e[i];a.recurring&&(a.end=s.getNextOccurance(a),t.push(a))}t.length>0&&(o.hide(),r.show(),t=t.sort(s.orderSets),s.initCountDown(n,t[0],t,0))},countDownEnded:function(e,t,u){clearInterval(a),clearInterval(i);var d=t[u];r.hide(),o.show(),o.html('<h4 class="drz-h4 drzCountdown-endMessage">\n              '+(d.endMessage||"")+"\n            </h4>");var c=u+1,f=t[c],g=s.getBuffer(d);"undefined"!==(void 0===f?"undefined":_typeof(f))&&!1!==f?g?a=setInterval(function(){s.getRemainingTime(g).total<=0&&(o.hide(),r.show(),s.initCountDown(n,f,t,c),clearInterval(a))},500):(o.hide(),r.show(),s.initCountDown(n,f,t,c)):d.buffer?a=setInterval(function(){s.getRemainingTime(g).total<=0&&(o.hide(),r.show(),s.recurring(t),clearInterval(a))},100):s.recurring(t)},initCountDown:function(e,t,n,o){s.updateTime(e,t,n,o),i=setInterval(function(){s.updateTime(e,t,n,o)},1e3)}};function d(){var t=n.attr("data-countdown"),o=[{end:s.tempDate(),buffer:!1,endMessage:"Countdown Ended!",recurring:!1}];if("undefined"!==(void 0===t?"undefined":_typeof(t))&&!1!==t)if(t=JSON.parse(t),u=t.sets.length,t.sets=t.sets.sort(s.orderSets),u>0)for(var r=0;r<=u-1;r++){var i=e.extend(!0,{},o[0],t.sets[r]);if(t.sets[r]=i,!s.checkStart(i,t.sets,r))return void s.initCountDown(n,i,t.sets,r)}else s.initCountDown(n,o[0],o,0);else s.initCountDown(n,o[0],o,0)}t||(t=s),d(),e.fn.drzCountDown.reset=function(){clearInterval(i),clearInterval(a),d()}}),e.fn.drzCountDown.test=t||{},this}}(jQuery);