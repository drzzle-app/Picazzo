"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.fn.drzMap=function(){return e(this).each(function(){var t=e(this),o=t.find(".drzMap-container"),s=t.find(".drzMap-zoomIn").get(0),n=t.find(".drzMap-zoomOut").get(0),i=t.find(".drzMap-container").get(0),r=t.find(".drzMap-address"),a=e(window),l=navigator.userAgent.toLowerCase().indexOf("trident")>-1,p={getHex:function(e){var t=e;if(/^#[0-9A-F]{6}$/i.test(t))return t;function o(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}return"#"+o((t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)||e.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+)\)$/))[1])+o(t[2])+o(t[3])},CustomZoomControl:function(e,t,o){if(void 0!==s&&void 0!==n){s.style.backgroundColor=o,n.style.backgroundColor=o;var i=s,r=n;e.appendChild(i),e.appendChild(r),e.classList.add("drzMap-zoomContainer"),google.maps.event.addDomListener(i,"click",function(){t.setZoom(t.getZoom()+1)}),google.maps.event.addDomListener(r,"click",function(){t.setZoom(t.getZoom()-1)})}},renderMap:function(t){var o=t,s={baseColor:r.css("background-color"),markers:[]};"undefined"!==(void 0===o?"undefined":_typeof(o))&&!1!==o?("string"==typeof o&&(o=JSON.parse(o)),o=e.extend(!0,{},s,o)):o=s,o.useBg&&(o.baseColor=p.getHex(r.css("background-color")));var n=p.getHex(o.baseColor),a=[{elementType:"labels",stylers:[{saturation:-20}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.sports_complex",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"landscape",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"water",elementType:"geometry",stylers:[{hue:n},{visibility:"on"},{lightness:5},{saturation:-20}]}],y=[],u={zoom:15,panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,styles:a};o.markers.length<=1&&(u.center=new google.maps.LatLng(o.markers[0].lat,o.markers[0].lng));var d=new google.maps.Map(i,u);drzzle.googleMaps.push(d);for(var m=new google.maps.LatLngBounds,g=function(e){var t=o.markers[e],s='<div class="drzMap-markerTip">\n              <span class="drzMap-markerTitle">'+(t.title||"")+'</span>\n              <span class="drzMap-markerAddr">'+(t.address||"")+"</span>\n              </div>",n=new google.maps.InfoWindow({content:s,maxWidth:200}),i=new google.maps.LatLng(t.lat,t.lng),r=l?"https://s3-us-west-1.amazonaws.com/drz-assets/mock-images/icons/maps-default-pin.png":t.markerImg;m.extend(i);var a=new google.maps.Marker({position:i,map:d,visible:!0,icon:r});a.addListener("click",function(){n.open(d,a)}),y.push(a)},f=0;f<o.markers.length;f++)g(f);y.length>1&&(d.fitBounds(m),d.panToBounds(m)),google.maps.event.addListenerOnce(d,"idle",function(){var e=document.createElement("div");new p.CustomZoomControl(e,d,o.baseColor);d.controls[google.maps.ControlPosition.LEFT_TOP].push(e)})}},y=void 0;if(o.length){var u=t.attr("data-google-map"),d=void 0,m=!0,g=void 0;y=function(){m&&JSON.parse(u).useBg&&(m=!1,g=r.css("background-color")),clearTimeout(d),d=setTimeout(function(){g!==r.css("background-color")&&p.renderMap(u),m=!0},250)},a.resize(y),p.renderMap(u)}e.fn.drzMap.destroy=function(){a.off("resize",y)}}),this}}(jQuery);