"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.fn.drzMap=function(){return e(this).each(function(){var t=e(this),o=t.find(".drzMap-container"),n=t.find(".drzMap-zoomIn").get(0),s=t.find(".drzMap-zoomOut").get(0),i=t.find(".drzMap-container").get(0),r=t.find(".drzMap-address"),a=e(window),l=navigator.userAgent.toLowerCase().indexOf("trident")>-1,p={getHex:function(e){var t=e;if(/^#[0-9A-F]{6}$/i.test(t))return t;function o(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}return"#"+o((t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)||e.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+)\)$/))[1])+o(t[2])+o(t[3])},CustomZoomControl:function(e,t,o){if(void 0!==n&&void 0!==s){n.style.backgroundColor=o,s.style.backgroundColor=o;var i=n,r=s;e.appendChild(i),e.appendChild(r),e.classList.add("drzMap-zoomContainer"),google.maps.event.addDomListener(i,"click",function(){t.setZoom(t.getZoom()+1)}),google.maps.event.addDomListener(r,"click",function(){t.setZoom(t.getZoom()-1)})}},getImgPin:function(e){var t=e;if(window.__editor&&!e.match(/^http/gi)){var o="development"===process.env.NODE_ENV?"":"file://";t=(o=""+o+process.env._staticWrite)+"/"+window._currentSite.name+e}return t},renderMap:function(t){var o=t,n={baseColor:r.css("background-color"),markers:[]};"undefined"!==(void 0===o?"undefined":_typeof(o))&&!1!==o?("string"==typeof o&&(o=JSON.parse(o)),o=e.extend(!0,{},n,o)):o=n,o.useBg&&(o.baseColor=p.getHex(r.css("background-color")));var s=p.getHex(o.baseColor),a=[{elementType:"labels",stylers:[{saturation:-20}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.government",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.sports_complex",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.attraction",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"poi.business",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"landscape",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]},{featureType:"water",elementType:"geometry",stylers:[{hue:s},{visibility:"on"},{lightness:5},{saturation:-20}]}],y=[],u={zoom:15,panControl:!1,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1,styles:a};o.markers.length<=1&&(u.center=new google.maps.LatLng(o.markers[0].lat,o.markers[0].lng));var m=new google.maps.Map(i,u);drzzle.googleMaps.push(m);for(var d=new google.maps.LatLngBounds,g=function(e){var t=o.markers[e],n='<div class="drzMap-markerTip">\n              <span class="drzMap-markerTitle">'+(t.title||"")+'</span>\n              <span class="drzMap-markerAddr">'+(t.address||"")+"</span>\n              </div>",s=new google.maps.InfoWindow({content:n,maxWidth:200}),i=new google.maps.LatLng(t.lat,t.lng),r=l?"https://s3-us-west-1.amazonaws.com/drz-assets/mock-images/icons/maps-default-pin.png":p.getImgPin(t.markerImg);d.extend(i);var a=new google.maps.Marker({position:i,map:m,visible:!0,icon:r});a.addListener("click",function(){s.open(m,a)}),y.push(a)},f=0;f<o.markers.length;f++)g(f);y.length>1&&(m.fitBounds(d),m.panToBounds(d)),google.maps.event.addListenerOnce(m,"idle",function(){var e=document.createElement("div");new p.CustomZoomControl(e,m,o.baseColor);m.controls[google.maps.ControlPosition.LEFT_TOP].push(e)})}},y=void 0;if(o.length){var u=t.attr("data-google-map"),m=void 0,d=!0,g=void 0;y=function(){d&&JSON.parse(u).useBg&&(d=!1,g=r.css("background-color")),clearTimeout(m),m=setTimeout(function(){g!==r.css("background-color")&&p.renderMap(u),d=!0},250)},a.resize(y),p.renderMap(u)}e.fn.drzMap.destroy=function(){a.off("resize",y)}}),this}}(jQuery);